{
  "info": {
    "name": "PetCare - Product Management & Shopping Cart",
    "description": "API collection for testing Product Management and Shopping Cart features",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:8080"
    },
    {
      "key": "adminToken",
      "value": ""
    },
    {
      "key": "petOwnerToken",
      "value": ""
    },
    {
      "key": "adminUserId",
      "value": ""
    },
    {
      "key": "petOwnerUserId",
      "value": ""
    },
    {
      "key": "productId",
      "value": ""
    }
  ],
  "item": [
    {
      "name": "1. Authentication",
      "item": [
        {
          "name": "Admin Login",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.success && response.data && response.data.token) {",
                  "        pm.collectionVariables.set('adminToken', response.data.token);",
                  "        pm.collectionVariables.set('adminUserId', response.data.user.id);",
                  "        console.log('Admin token saved:', response.data.token);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\\n  \\\"email\\\": \\\"admin@petcare.com\\\",\\n  \\\"password\\\": \\\"admin123\\\"\\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/login",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "login"]
            }
          }
        },
        {
          "name": "Register Pet Owner",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\\n  \\\"email\\\": \\\"petowner@test.com\\\",\\n  \\\"password\\\": \\\"password123\\\",\\n  \\\"role\\\": \\\"PET_OWNER\\\",\\n  \\\"roleBasedData\\\": {\\n    \\\"fullName\\\": \\\"John Pet Owner\\\",\\n    \\\"phoneNumber\\\": \\\"0123456789\\\",\\n    \\\"address\\\": \\\"123 Pet Street, Pet City\\\"\\n  }\\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/register",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "register"]
            }
          }
        },
        {
          "name": "Pet Owner Login",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.success && response.data && response.data.token) {",
                  "        pm.collectionVariables.set('petOwnerToken', response.data.token);",
                  "        pm.collectionVariables.set('petOwnerUserId', response.data.user.id);",
                  "        console.log('Pet Owner token saved:', response.data.token);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\\n  \\\"email\\\": \\\"petowner@test.com\\\",\\n  \\\"password\\\": \\\"password123\\\"\\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/login",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "login"]
            }
          }
        }
      ]
    },
    {
      "name": "2. Admin Product Management",
      "item": [
        {
          "name": "Create Product - Dog Food",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.success && response.data && response.data.id) {",
                  "        pm.collectionVariables.set('productId', response.data.id);",
                  "        console.log('Product ID saved:', response.data.id);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{adminToken}}"
              },
              {
                "key": "user-id",
                "value": "{{adminUserId}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\\n  \\\"name\\\": \\\"Premium Dog Food - Adult\\\",\\n  \\\"description\\\": \\\"High-quality nutrition for adult dogs with real chicken and rice. Perfect for maintaining healthy weight and energy levels.\\\",\\n  \\\"brand\\\": \\\"PetNutrition Pro\\\",\\n  \\\"price\\\": 25.99,\\n  \\\"stockQuantity\\\": 100,\\n  \\\"category\\\": \\\"FOOD\\\",\\n  \\\"targetPetType\\\": \\\"DOG\\\",\\n  \\\"imageUrl\\\": \\\"https://example.com/images/premium-dog-food.jpg\\\",\\n  \\\"specifications\\\": \\\"{\\\\\\\"protein\\\\\\\": \\\\\\\"26%\\\\\\\", \\\\\\\"fat\\\\\\\": \\\\\\\"15%\\\\\\\", \\\\\\\"fiber\\\\\\\": \\\\\\\"4%\\\\\\\", \\\\\\\"moisture\\\\\\\": \\\\\\\"10%\\\\\\\"}\\\",\\n  \\\"ingredients\\\": \\\"[\\\\\\\"Real Chicken\\\\\\\", \\\\\\\"Brown Rice\\\\\\\", \\\\\\\"Sweet Potatoes\\\\\\\", \\\\\\\"Peas\\\\\\\", \\\\\\\"Chicken Fat\\\\\\\", \\\\\\\"Natural Flavors\\\\\\\"]\\\",\\n  \\\"usageInstructions\\\": \\\"{\\\\\\\"feeding_guide\\\\\\\": \\\\\\\"1-2 cups daily for adult dogs 20-40 lbs\\\\\\\", \\\\\\\"storage\\\\\\\": \\\\\\\"Store in cool, dry place\\\\\\\"}\\\",\\n  \\\"weight\\\": 5.0,\\n  \\\"dimensions\\\": \\\"30 x 20 x 15\\\",\\n  \\\"ageGroup\\\": \\\"Adult\\\",\\n  \\\"isActive\\\": true\\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/admin/products",
              "host": ["{{baseUrl}}"],
              "path": ["api", "admin", "products"]
            }
          }
        },
        {
          "name": "Create Product - Cat Toy",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{adminToken}}"
              },
              {
                "key": "user-id",
                "value": "{{adminUserId}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\\n  \\\"name\\\": \\\"Interactive Cat Feather Wand\\\",\\n  \\\"description\\\": \\\"Premium feather wand toy to keep your cat active and entertained. Features natural feathers and sturdy construction.\\\",\\n  \\\"brand\\\": \\\"Feline Fun\\\",\\n  \\\"price\\\": 12.99,\\n  \\\"stockQuantity\\\": 50,\\n  \\\"category\\\": \\\"TOYS\\\",\\n  \\\"targetPetType\\\": \\\"CAT\\\",\\n  \\\"imageUrl\\\": \\\"https://example.com/images/cat-feather-wand.jpg\\\",\\n  \\\"specifications\\\": \\\"{\\\\\\\"length\\\\\\\": \\\\\\\"18 inches\\\\\\\", \\\\\\\"material\\\\\\\": \\\\\\\"Natural feathers and wood\\\\\\\"}\\\",\\n  \\\"ingredients\\\": \\\"[\\\\\\\"Natural feathers\\\\\\\", \\\\\\\"Wood handle\\\\\\\", \\\\\\\"String\\\\\\\"]\\\",\\n  \\\"usageInstructions\\\": \\\"{\\\\\\\"usage\\\\\\\": \\\\\\\"Supervised play only\\\\\\\", \\\\\\\"care\\\\\\\": \\\\\\\"Store away from pets when not in use\\\\\\\"}\\\",\\n  \\\"weight\\\": 0.15,\\n  \\\"dimensions\\\": \\\"45 x 5 x 2\\\",\\n  \\\"ageGroup\\\": \\\"All Ages\\\",\\n  \\\"isActive\\\": true\\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/admin/products",
              "host": ["{{baseUrl}}"],
              "path": ["api", "admin", "products"]
            }
          }
        },
        {
          "name": "Get All Products (Admin)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{adminToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/admin/products?page=0&size=10",
              "host": ["{{baseUrl}}"],
              "path": ["api", "admin", "products"],
              "query": [
                {
                  "key": "page",
                  "value": "0"
                },
                {
                  "key": "size",
                  "value": "10"
                }
              ]
            }
          }
        },
        {
          "name": "Update Product Status",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{adminToken}}"
              },
              {
                "key": "user-id",
                "value": "{{adminUserId}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\\n  \\\"productId\\\": {{productId}},\\n  \\\"isActive\\\": true,\\n  \\\"isAvailable\\\": true,\\n  \\\"reason\\\": \\\"Product approved and ready for sale\\\"\\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/admin/products/{{productId}}/status",
              "host": ["{{baseUrl}}"],
              "path": ["api", "admin", "products", "{{productId}}", "status"]
            }
          }
        },
        {
          "name": "Update Stock",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{adminToken}}"
              },
              {
                "key": "user-id",
                "value": "{{adminUserId}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/admin/products/{{productId}}/stock?stock=75",
              "host": ["{{baseUrl}}"],
              "path": ["api", "admin", "products", "{{productId}}", "stock"],
              "query": [
                {
                  "key": "stock",
                  "value": "75"
                }
              ]
            }
          }
        },
        {
          "name": "Low Stock Analytics",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{adminToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/admin/products/analytics/low-stock?threshold=10",
              "host": ["{{baseUrl}}"],
              "path": ["api", "admin", "products", "analytics", "low-stock"],
              "query": [
                {
                  "key": "threshold",
                  "value": "10"
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "3. Public Product Browsing",
      "item": [
        {
          "name": "Get Active Products",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/products?page=0&size=12",
              "host": ["{{baseUrl}}"],
              "path": ["api", "products"],
              "query": [
                {
                  "key": "page",
                  "value": "0"
                },
                {
                  "key": "size",
                  "value": "12"
                }
              ]
            }
          }
        },
        {
          "name": "Get Product by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/products/{{productId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "products", "{{productId}}"]
            }
          }
        },
        {
          "name": "Filter by Category - FOOD",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/products/category/FOOD?page=0&size=12",
              "host": ["{{baseUrl}}"],
              "path": ["api", "products", "category", "FOOD"],
              "query": [
                {
                  "key": "page",
                  "value": "0"
                },
                {
                  "key": "size",
                  "value": "12"
                }
              ]
            }
          }
        },
        {
          "name": "Filter by Pet Type - DOG",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/products/pet-type/DOG?page=0&size=12",
              "host": ["{{baseUrl}}"],
              "path": ["api", "products", "pet-type", "DOG"],
              "query": [
                {
                  "key": "page",
                  "value": "0"
                },
                {
                  "key": "size",
                  "value": "12"
                }
              ]
            }
          }
        },
        {
          "name": "Search Products",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/products/search?keyword=dog food&page=0&size=12",
              "host": ["{{baseUrl}}"],
              "path": ["api", "products", "search"],
              "query": [
                {
                  "key": "keyword",
                  "value": "dog food"
                },
                {
                  "key": "page",
                  "value": "0"
                },
                {
                  "key": "size",
                  "value": "12"
                }
              ]
            }
          }
        },
        {
          "name": "Get Product Categories",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/products/categories",
              "host": ["{{baseUrl}}"],
              "path": ["api", "products", "categories"]
            }
          }
        },
        {
          "name": "Get Pet Types",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/products/pet-types",
              "host": ["{{baseUrl}}"],
              "path": ["api", "products", "pet-types"]
            }
          }
        }
      ]
    },
    {
      "name": "4. Shopping Cart (Pet Owner)",
      "item": [
        {
          "name": "Add Product to Cart",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{petOwnerToken}}"
              },
              {
                "key": "user-id",
                "value": "{{petOwnerUserId}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\\n  \\\"productId\\\": {{productId}},\\n  \\\"quantity\\\": 2\\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/cart/add",
              "host": ["{{baseUrl}}"],
              "path": ["api", "cart", "add"]
            }
          }
        },
        {
          "name": "Get Cart Items",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{petOwnerToken}}"
              },
              {
                "key": "user-id",
                "value": "{{petOwnerUserId}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/cart",
              "host": ["{{baseUrl}}"],
              "path": ["api", "cart"]
            }
          }
        },
        {
          "name": "Update Cart Item Quantity",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{petOwnerToken}}"
              },
              {
                "key": "user-id",
                "value": "{{petOwnerUserId}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/cart/{{productId}}?quantity=3",
              "host": ["{{baseUrl}}"],
              "path": ["api", "cart", "{{productId}}"],
              "query": [
                {
                  "key": "quantity",
                  "value": "3"
                }
              ]
            }
          }
        },
        {
          "name": "Get Cart Summary",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{petOwnerToken}}"
              },
              {
                "key": "user-id",
                "value": "{{petOwnerUserId}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/cart/summary",
              "host": ["{{baseUrl}}"],
              "path": ["api", "cart", "summary"]
            }
          }
        },
        {
          "name": "Validate Cart",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{petOwnerToken}}"
              },
              {
                "key": "user-id",
                "value": "{{petOwnerUserId}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/cart/validate",
              "host": ["{{baseUrl}}"],
              "path": ["api", "cart", "validate"]
            }
          }
        },
        {
          "name": "Remove Product from Cart",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{petOwnerToken}}"
              },
              {
                "key": "user-id",
                "value": "{{petOwnerUserId}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/cart/{{productId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "cart", "{{productId}}"]
            }
          }
        },
        {
          "name": "Clear Cart",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{petOwnerToken}}"
              },
              {
                "key": "user-id",
                "value": "{{petOwnerUserId}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/cart/clear",
              "host": ["{{baseUrl}}"],
              "path": ["api", "cart", "clear"]
            }
          }
        }
      ]
    }
  ]
}
